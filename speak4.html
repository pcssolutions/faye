<script>
//var voiceSelect = $('#voiceSelect');
var voiceSelect = "Google US English";
var voices;

speechSynthesis.onvoiceschanged = function () {
	if (voices)
		return;
	voices = speechSynthesis.getVoices();

	voices.forEach(function (voice, i) {
		var voiceName = voice.name;
		var selected = '';

		if (voiceName == 'native') {
			selected = 'selected';
		}
		var option = "<option value='" + voiceName + "' " + selected + " >" + voiceName + "</option>";
		voiceSelect.append(option);
	});
};

voiceSelect.change(function () {
	//var aiload = $('#ai').val();
	var aiload = "something or nothing";
	var msg = new SpeechSynthesisUtterance(aiload);
	msg.volume = 1; // 0 to 1
	msg.rate = 1; // 0.1 to 10
	msg.pitch = 0; //0 to 2
	msg.text = aiload;

	var val = $(this).val();
	var voice = voices.filter(function (v) {
			return v.name == val;
		})[0];
	if (!voice) return;

	msg.lang = voice.lang;
	msg.voice = voice;

	msg.onend = function (e) {
		console.log('Finished in ' + event.elapsedTime + ' seconds.');
	};

	speechSynthesis.cancel();
	speechSynthesis.speak(msg);
});
</script>
